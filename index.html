<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.2">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #8cd3fe; -webkit-text-stroke: #8cd3fe}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #c27e65; -webkit-text-stroke: #c27e65}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d7378; -webkit-text-stroke: #6d7378}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca; min-height: 16.0px}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca; background-color: #171818}
    span.s1 {font-kerning: none; background-color: #171818}
    span.s2 {font-kerning: none; color: #8cd3fe; background-color: #171818; -webkit-text-stroke: 0px #8cd3fe}
    span.s3 {font-kerning: none; color: #6d6d6d; background-color: #171818; -webkit-text-stroke: 0px #6d6d6d}
    span.s4 {font-kerning: none; color: #cacaca; background-color: #171818; -webkit-text-stroke: 0px #cacaca}
    span.s5 {font-kerning: none; color: #c27e65; background-color: #171818; -webkit-text-stroke: 0px #c27e65}
    span.s6 {font-kerning: none; color: #4689cc; background-color: #171818; -webkit-text-stroke: 0px #4689cc}
    span.s7 {font-kerning: none; color: #b76ff7; background-color: #171818; -webkit-text-stroke: 0px #b76ff7}
    span.s8 {font-kerning: none; color: #d4d4d4; background-color: #171818; -webkit-text-stroke: 0px #d4d4d4}
    span.s9 {font-kerning: none; color: #a7c598; background-color: #171818; -webkit-text-stroke: 0px #a7c598}
    span.s10 {font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">html</span><span class="s4"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s5">"es"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s5">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s4"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">title</span><span class="s3">&gt;</span><span class="s1">haFAnAs - Divisor de Cuentas</span><span class="s3">&lt;/</span><span class="s6">title</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">&lt;!-- Tailwind CSS --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">&lt;!-- React y Babel --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://unpkg.com/react@18/umd/react.production.min.js"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://unpkg.com/@babel/standalone/babel.min.js"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">&lt;!-- Lucide Icons --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://unpkg.com/lucide@latest"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">@keyframes</span><span class="s4"> </span><span class="s5">fadeIn</span><span class="s4"> </span><span class="s8">{</span><span class="s4"> </span><span class="s5">from</span><span class="s4"> </span><span class="s8">{</span><span class="s4"> </span><span class="s1">opacity:</span><span class="s4"> </span><span class="s9">0</span><span class="s8">;</span><span class="s4"> </span><span class="s1">transform:</span><span class="s4"> </span><span class="s5">translateY(</span><span class="s9">10px</span><span class="s5">)</span><span class="s8">;</span><span class="s4"> </span><span class="s8">}</span><span class="s4"> </span><span class="s5">to</span><span class="s4"> </span><span class="s8">{</span><span class="s4"> </span><span class="s1">opacity:</span><span class="s4"> </span><span class="s9">1</span><span class="s8">;</span><span class="s4"> </span><span class="s1">transform:</span><span class="s4"> </span><span class="s5">translateY(</span><span class="s9">0</span><span class="s5">)</span><span class="s8">;</span><span class="s4"> </span><span class="s8">}</span><span class="s4"> </span><span class="s8">}</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s6">.animate-in</span><span class="s4"> </span><span class="s8">{</span><span class="s4"> </span><span class="s2">animation:</span><span class="s4"> </span><span class="s1">fadeIn</span><span class="s4"> </span><span class="s9">0.3s</span><span class="s4"> </span><span class="s1">ease-out</span><span class="s4"> </span><span class="s1">forwards</span><span class="s8">;</span><span class="s4"> </span><span class="s8">}</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s6">body</span><span class="s4"> </span><span class="s8">{</span><span class="s4"> </span><span class="s1">-webkit-tap-highlight-color:</span><span class="s4"> </span><span class="s5">transparent</span><span class="s8">;</span><span class="s4"> </span><span class="s8">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;</span><span class="s6">body</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-slate-100 overflow-hidden"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"root"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"text/babel"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const { useState, useEffect, useMemo } = React;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// --- Componentes de Iconos ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const Icon = ({ name, className, size = 24 }) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>useEffect(() =&gt; { if (window.lucide) window.lucide.createIcons(); }, [name]);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>return &lt;i data-lucide={name} className={className} style={{ width: size, height: size }}&gt;&lt;/i&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>};</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const Camera = (p) =&gt; &lt;Icon name="camera" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const Plus = (p) =&gt; &lt;Icon name="plus" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const Minus = (p) =&gt; &lt;Icon name="minus" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const Trash2 = (p) =&gt; &lt;Icon name="trash-2" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const Receipt = (p) =&gt; &lt;Icon name="receipt" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const ChevronRight = (p) =&gt; &lt;Icon name="chevron-right" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const ChevronLeft = (p) =&gt; &lt;Icon name="chevron-left" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const Check = (p) =&gt; &lt;Icon name="check" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const Gift = (p) =&gt; &lt;Icon name="gift" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const Loader2 = (p) =&gt; &lt;Icon name="loader-2" className={`${p.className} animate-spin`} {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const AlertCircle = (p) =&gt; &lt;Icon name="alert-circle" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const Share2 = (p) =&gt; &lt;Icon name="share-2" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const X = (p) =&gt; &lt;Icon name="x" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const Info = (p) =&gt; &lt;Icon name="info" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const Sparkles = (p) =&gt; &lt;Icon name="sparkles" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const Keyboard = (p) =&gt; &lt;Icon name="keyboard" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const HandCoins = (p) =&gt; &lt;Icon name="hand-coins" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const List = (p) =&gt; &lt;Icon name="list" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const Edit2 = (p) =&gt; &lt;Icon name="edit-2" {...p} /&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const MenuIcon = (p) =&gt; &lt;Icon name="menu" {...p} /&gt;;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// --- Constantes ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const SAINT_SEIYA = ['Seiya', 'Shiryu', 'Hyoga', 'Shun', 'Ikki', 'Saori', 'Mu', 'AldebarÃ¡n', 'Saga', 'Kanon', 'MÃ¡scara de Muerte', 'Aioria', 'Shaka', 'Dohko', 'Milo', 'Aioros', 'Shura', 'Camus', 'Afrodita', 'Aries', 'Tauro', 'GÃ©minis', 'CÃ¡ncer', 'Leo', 'Virgo', 'Libra', 'Escorpio', 'Sagitario', 'Capricornio', 'Acuario', 'Piscis'];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const NAMES = ['Luna', 'RÃ­o', 'Sol', 'Zafiro', 'Jade', 'Rayo', 'Gema', 'Mar', 'Nube', ...SAINT_SEIYA];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const FACES = ['ğŸ˜€','ğŸ˜ƒ','ğŸ˜„','ğŸ˜','ğŸ˜†','ğŸ˜…','ğŸ˜‚','ğŸ¤£','ğŸ˜Š','ğŸ˜‡','ğŸ™‚','ğŸ™ƒ','ğŸ˜‰','ğŸ˜Œ','ğŸ˜','ğŸ¥°','ğŸ˜˜','ğŸ˜‹','ğŸ˜›','ğŸ˜œ','ğŸ¤ª','ğŸ¤¨','ğŸ§','ğŸ˜','ğŸ¤©','ğŸ¥³','ğŸ˜','ğŸ¤”','ğŸ¤­','ğŸ¤«','ğŸ¤¤','ğŸ˜µ','ğŸ¥´','ğŸ¤ '];</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const CATEGORIES = [</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ cat: 'Bebidas', items: [{e:'â˜•',n:'CafÃ©'},{e:'ğŸº',n:'Cerveza'},{e:'ğŸ·',n:'Vino'},{e:'ğŸ¥¤',n:'Refresco'},{e:'ğŸ’§',n:'Agua'},{e:'ğŸ¹',n:'CÃ³ctel'}] },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ cat: 'Comidas', items: [{e:'ğŸ•',n:'Pizza'},{e:'ğŸ”',n:'Burger'},{e:'ğŸŒ®',n:'Tacos'},{e:'ğŸ£',n:'Sushi'},{e:'ğŸ',n:'Pasta'},{e:'ğŸ¥—',n:'Ensalada'},{e:'ğŸ¥©',n:'Carne'},{e:'ğŸ—',n:'Pollo'}] },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ cat: 'Postres', items: [{e:'ğŸ°',n:'Postre'},{e:'ğŸ¦',n:'Helado'},{e:'ğŸ©',n:'Dona'},{e:'ğŸª',n:'Galleta'},{e:'ğŸ¥',n:'Panqueques'}] }</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>];</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const PALETTE = [</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ f: 'bg-emerald-500', t: 'text-emerald-700', b: 'border-emerald-200' },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ f: 'bg-amber-500', t: 'text-amber-700', b: 'border-amber-200' },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ f: 'bg-rose-500', t: 'text-rose-700', b: 'border-rose-200' },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ f: 'bg-sky-500', t: 'text-sky-700', b: 'border-sky-200' },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ f: 'bg-violet-500', t: 'text-violet-700', b: 'border-violet-200' },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ f: 'bg-orange-500', t: 'text-orange-700', b: 'border-orange-200' },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ f: 'bg-teal-500', t: 'text-teal-700', b: 'border-teal-200' },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ f: 'bg-pink-500', t: 'text-pink-700', b: 'border-pink-200' },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>{ f: 'bg-indigo-500', t: 'text-indigo-700', b: 'border-indigo-200' },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>];</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const apiKey = "";<span class="Apple-converted-space">Â </span></span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>// --- Estructura UI ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const UIWrapper = ({ title, children, footer, onBack }) =&gt; (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex flex-col h-screen max-w-md mx-auto bg-slate-50 shadow-2xl overflow-hidden font-sans"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;header className="bg-indigo-600 text-white p-5 shadow-lg relative shrink-0"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{onBack &amp;&amp; &lt;button onClick={onBack} className="absolute left-4 top-6 p-1.5 bg-white/10 rounded-full active:bg-white/20"&gt;&lt;ChevronLeft size={20}/&gt;&lt;/button&gt;}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className={onBack ? "ml-8 text-center" : "text-center"}&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;h1 className="text-2xl font-black italic tracking-tighter"&gt;haFAnAs&lt;/h1&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;p className="text-indigo-100 text-[10px] font-bold uppercase tracking-widest opacity-80"&gt;{title}&lt;/p&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/header&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;main className="flex-1 overflow-y-auto p-4 space-y-4"&gt;{children}&lt;/main&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>{footer &amp;&amp; &lt;footer className="p-4 bg-white border-t border-slate-200 shrink-0"&gt;{footer}&lt;/footer&gt;}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>const App = () =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const [step, setStep] = useState('welcome');</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const [items, setItems] = useState([]);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const [people, setPeople] = useState([]);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const [assignments, setAssignments] = useState({});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const [tax, setTax] = useState(0);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const [tip, setTip] = useState(10);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const [pricesIncludeTax, setPricesIncludeTax] = useState(false);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const [invitations, setInvitations] = useState({});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const [loading, setLoading] = useState(false);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const [loadingMessage, setLoadingMessage] = useState("");</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const [error, setError] = useState(null);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const [selectedPersonDetail, setSelectedPersonDetail] = useState(null);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const [showFullBreakdown, setShowFullBreakdown] = useState(false);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const [copySuccess, setCopySuccess] = useState(false);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const [manualForm, setManualForm] = useState({ name: '', price: '', quantity: '1' });</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const [editingId, setEditingId] = useState(null);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const [showEmojiMenu, setShowEmojiMenu] = useState(false);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const generateId = () =&gt; Math.random().toString(36).substr(2, 9);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const getColor = (idx) =&gt; PALETTE[idx % PALETTE.length];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const getFace = () =&gt; FACES[Math.floor(Math.random() * FACES.length)];</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const addPerson = (name) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>if (!name.trim()) return;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>setPeople([...people, { id: generateId(), name: name.trim(), avatar: getFace() }]);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>};</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const addRandom = () =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>const val = NAMES[Math.floor(Math.random() * NAMES.length)];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>addPerson(people.some(p =&gt; p.name === val) ? `${val} ${people.length + 1}` : val);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>};</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const handleManual = (e) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>e.preventDefault();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>if (!manualForm.name || !manualForm.price) return;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>if (editingId) {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>setItems(items.map(i =&gt; i.id === editingId ? { ...i, name: manualForm.name, price: parseFloat(manualForm.price), quantity: parseInt(manualForm.quantity) || 1 } : i));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>setEditingId(null);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>} else {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>setItems([...items, { id: generateId(), name: manualForm.name, price: parseFloat(manualForm.price), quantity: parseInt(manualForm.quantity) || 1, ocr: false }]);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>setManualForm({ name: '', price: '', quantity: '1' });</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>setShowEmojiMenu(false);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>};</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const processOCR = async (file) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>setLoading(true); setLoadingMessage("Leyendo ticket..."); setError(null);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>try {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const reader = new FileReader();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>reader.readAsDataURL(file);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>reader.onloadend = async () =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const prompt = `Extract items from this receipt as JSON object with "items": [{"name": string, "price": number, "quantity": number}].`;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>method: 'POST',</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>headers: { 'Content-Type': 'application/json' },</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>body: JSON.stringify({ contents: [{ parts: [{ text: prompt }, { inlineData: { mimeType: "image/png", data: reader.result.split(',')[1] } }] }], generationConfig: { responseMimeType: "application/json" } })</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const json = await res.json();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const data = JSON.parse(json.candidates[0].content.parts[0].text);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>setItems(data.items.map(i =&gt; ({ ...i, id: generateId(), ocr: true })));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>setStep('setup');</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>} catch (e) { setError("No se pudo leer el ticket."); } finally { setLoading(false); }</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>};</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const calculate = () =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>const iTotal = items.reduce((acc, i) =&gt; acc + i.price, 0);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>const tRate = tax/100, pRate = tip/100;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>let sub, tAm, pAm;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>if (pricesIncludeTax) { sub = iTotal/(1+tRate); tAm = iTotal-sub; pAm = sub*pRate; }</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>else { sub = iTotal; tAm = sub*tRate; pAm = sub*pRate; }</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>const finalT = iTotal + (pricesIncludeTax ? pAm : (tAm + pAm));</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>let pData = {};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>people.forEach(p =&gt; pData[p.id] = { name: p.name, base: 0, items: [], inviting: [], paidBy: [] });</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>items.forEach(item =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const as = assignments[item.id] || {};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const totalW = Object.values(as).reduce((a,b)=&gt;a+b, 0);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if (totalW === 0) return;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>Object.entries(as).forEach(([pId, w]) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const share = (w/totalW)*item.price;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const units = (w/totalW)*item.quantity;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>pData[pId].base += share;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>pData[pId].items.push({ name: item.name, share, units, totalQ: item.quantity });</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>people.forEach(p =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const d = pData[p.id];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const r = iTotal &gt; 0 ? d.base/iTotal : 0;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>d.tax = tAm*r; d.tip = pAm*r;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>d.ownTotal = d.base + (pricesIncludeTax ? d.tip : (d.tax + d.tip));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>let balances = {};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>people.forEach(p =&gt; balances[p.id] = pData[p.id].ownTotal);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>people.filter(p =&gt; invitations[p.id] === 'everyone').forEach(inv =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const payers = people.filter(p =&gt; invitations[p.id] !== 'everyone');</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const am = balances[inv.id];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if (am &gt; 0 &amp;&amp; payers.length &gt; 0) {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const spl = am/payers.length;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>payers.forEach(payer =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>balances[payer.id] += spl;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>pData[payer.id].inviting.push({ name: inv.name, amount: spl });</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>pData[inv.id].paidBy.push({ name: "Grupo", amount: am });</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>balances[inv.id] = 0;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>Object.entries(invitations).filter(([id, m]) =&gt; m !== 'self' &amp;&amp; m !== 'everyone').forEach(([tid, hid]) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const am = balances[tid];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if (am &gt; 0) {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>balances[hid] += am;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>pData[hid].inviting.push({ name: pData[tid].name, amount: am });</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>pData[tid].paidBy.push({ name: pData[hid].name, amount: am });</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>balances[tid] = 0;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>people.forEach(p =&gt; pData[p.id].final = balances[p.id]);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>return { sub, tAm, pAm, total: finalT, pData };</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>};</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const results = step === 'results' ? calculate() : null;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>const copy = (text) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>const el = document.createElement('textarea'); el.value = text; document.body.appendChild(el); el.select(); document.execCommand('copy'); document.body.removeChild(el);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>setCopySuccess(true); setTimeout(() =&gt; setCopySuccess(false), 2000);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>};</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if (step === 'welcome') return (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;UIWrapper title="Empecemos"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex flex-col items-center justify-center h-full text-center space-y-8 relative"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{loading &amp;&amp; &lt;div className="absolute inset-0 bg-white/95 z-50 flex flex-col items-center justify-center p-10"&gt;&lt;Loader2 className="text-indigo-600 mb-4" size={48}/&gt;&lt;h3 className="text-xl font-bold"&gt;{loadingMessage}&lt;/h3&gt;&lt;/div&gt;}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="w-24 h-24 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 shadow-inner"&gt;&lt;Receipt size={48}/&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="px-6"&gt;&lt;h2 className="text-3xl font-black text-slate-800"&gt;haFAnAs&lt;/h2&gt;&lt;p className="text-slate-500 mt-2 text-sm"&gt;Cuentas claras, amistades largas.&lt;/p&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="w-full max-w-xs space-y-3"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;label className="w-full bg-indigo-600 text-white font-bold py-4 rounded-2xl cursor-pointer flex items-center justify-center gap-2 shadow-lg active:scale-95"&gt;&lt;Camera size={20}/&gt; Escanear Ticket&lt;input type="file" accept="image/*" capture="environment" className="hidden" onChange={e =&gt; processOCR(e.target.files[0])}/&gt;&lt;/label&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button onClick={() =&gt; setStep('manual_items')} className="w-full bg-white border-2 border-slate-200 text-slate-600 font-bold py-4 rounded-2xl flex items-center justify-center gap-2 active:bg-slate-50 transition-all"&gt;&lt;Keyboard size={20}/&gt; Ingreso Manual&lt;/button&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{error &amp;&amp; &lt;div className="text-red-500 text-xs flex items-center gap-1 font-bold animate-pulse"&gt;&lt;AlertCircle size={14}/&gt; {error}&lt;/div&gt;}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/UIWrapper&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if (step === 'manual_items') return (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;UIWrapper title="Cuenta" onBack={() =&gt; setStep('welcome')} footer={&lt;button disabled={items.length === 0} onClick={() =&gt; setStep('setup')} className="w-full py-4 bg-indigo-600 text-white font-bold rounded-2xl shadow-lg active:scale-95"&gt;Continuar&lt;/button&gt;}&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="bg-white p-4 rounded-2xl shadow-sm border border-slate-200 space-y-4 animate-in"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;form onSubmit={handleManual} className="space-y-3"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="relative"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;input value={manualForm.name} onChange={e =&gt; setManualForm({...manualForm, name: e.target.value})} placeholder="Â¿QuÃ© pidieron?" className="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 pr-12 outline-none focus:ring-2 focus:ring-indigo-500" required /&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button type="button" onClick={() =&gt; setShowEmojiMenu(!showEmojiMenu)} className={`absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-lg ${showEmojiMenu ? 'bg-indigo-600 text-white shadow-md' : 'text-indigo-600 active:bg-indigo-50'}`}&gt;&lt;MenuIcon size={20}/&gt;&lt;/button&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{showEmojiMenu &amp;&amp; (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="bg-slate-100 p-2 rounded-xl border max-h-52 overflow-y-auto grid grid-cols-2 gap-2 shadow-inner"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{CATEGORIES.flatMap(c =&gt; c.items).map((i, idx) =&gt; (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button key={idx} type="button" onClick={() =&gt; { setManualForm({...manualForm, name: `${i.e} ${i.n}`}); setShowEmojiMenu(false); }} className="p-2.5 bg-white text-[10px] font-black border rounded-xl text-left flex items-center gap-2 active:scale-95"&gt;&lt;span&gt;{i.e}&lt;/span&gt; {i.n}&lt;/button&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>))}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>)}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex gap-2"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;input value={manualForm.quantity} onChange={e =&gt; setManualForm({...manualForm, quantity: e.target.value})} type="number" placeholder="Cant." className="w-20 bg-slate-50 border border-slate-200 rounded-xl px-3 outline-none" required /&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;input value={manualForm.price} onChange={e =&gt; setManualForm({...manualForm, price: e.target.value})} type="number" step="0.01" placeholder="Total $" className="flex-1 bg-slate-50 border border-slate-200 rounded-xl px-4 outline-none" required /&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button type="submit" className="bg-indigo-600 text-white p-3 rounded-xl shadow-md"&gt;{editingId ? &lt;Check size={20}/&gt; : &lt;Plus size={20}/&gt;}&lt;/button&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/form&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="space-y-2"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{items.map(i =&gt; (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div key={i.id} className={`flex items-center justify-between bg-white p-4 rounded-xl border animate-in ${editingId === i.id ? 'border-amber-400 bg-amber-50' : 'border-slate-200'}`}&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="leading-tight"&gt;&lt;div className="font-bold text-slate-700"&gt;{i.name}&lt;/div&gt;&lt;div className="text-[10px] text-slate-400 font-bold uppercase"&gt;{i.quantity} und.&lt;/div&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex items-center gap-2"&gt;&lt;span className="font-black text-indigo-600 mr-2"&gt;${i.price.toFixed(2)}&lt;/span&gt;&lt;button onClick={() =&gt; { setEditingId(i.id); setManualForm({name: i.name, price: i.price.toString(), quantity: i.quantity.toString()}); }} className="text-slate-400 p-1 active:text-amber-500"&gt;&lt;Edit2 size={16}/&gt;&lt;/button&gt;&lt;button onClick={() =&gt; setItems(items.filter(x=&gt;x.id!==i.id))} className="text-red-300 p-1 active:text-red-500"&gt;&lt;Trash2 size={16}/&gt;&lt;/button&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>))}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/UIWrapper&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if (step === 'setup') return (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;UIWrapper title="Personas" onBack={() =&gt; setStep('manual_items')} footer={&lt;button disabled={people.length === 0} onClick={() =&gt; setStep('splitting')} className="w-full py-4 bg-indigo-600 text-white font-bold rounded-2xl shadow-lg active:scale-95"&gt;Asignar Platos&lt;/button&gt;}&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="bg-white p-4 rounded-2xl border space-y-3 animate-in shadow-sm"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;form onSubmit={e =&gt; { e.preventDefault(); addPerson(e.target.personName.value); e.target.reset(); }} className="flex gap-2"&gt;&lt;input name="personName" placeholder="Nombre del amigo..." className="flex-1 bg-slate-50 border rounded-xl px-4 outline-none focus:ring-2 focus:ring-indigo-500" /&gt;&lt;button type="submit" className="bg-indigo-600 text-white p-3 rounded-xl"&gt;&lt;Plus size={20}/&gt;&lt;/button&gt;&lt;/form&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button onClick={addRandom} className="w-full py-2 bg-indigo-50 text-indigo-600 rounded-xl text-[10px] font-black flex items-center justify-center gap-2 active:bg-indigo-100 uppercase tracking-widest"&gt;&lt;Sparkles size={14}/&gt; Personaje Aleatorio&lt;/button&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="space-y-2"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{people.map((p, idx) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const c = getColor(idx);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>return &lt;div key={p.id} className={`flex items-center justify-between bg-white p-3 rounded-xl border ${c.b} animate-in shadow-sm`}&gt;&lt;div className="flex items-center gap-3"&gt;&lt;div className={`w-10 h-10 ${c.f} rounded-full flex items-center justify-center text-xl shadow-inner`}&gt;{p.avatar}&lt;/div&gt;&lt;span className="font-bold text-slate-700"&gt;{p.name}&lt;/span&gt;&lt;/div&gt;&lt;button onClick={() =&gt; setPeople(people.filter(x=&gt;x.id!==p.id))} className="text-slate-300 active:text-red-400"&gt;&lt;Trash2 size={18}/&gt;&lt;/button&gt;&lt;/div&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>})}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/UIWrapper&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if (step === 'splitting') return (</span></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;UIWrapper title="AsignaciÃ³n" onBack={() =&gt; setStep('setup')} footer={&lt;div className="space-y-3"&gt;&lt;div className="bg-indigo-50 p-3 rounded-xl space-y-2"&gt;&lt;div className="flex items-center justify-between text-[10px] font-black text-indigo-700 uppercase"&gt;&lt;span&gt;Impuesto incluido en ticket&lt;/span&gt;&lt;input type="checkbox" checked={pricesIncludeTax} onChange={e=&gt;setPricesIncludeTax(e.target.checked)} className="w-5 h-5"/&gt;&lt;/div&gt;&lt;div className="flex gap-2"&gt;&lt;div className="flex-1"&gt;&lt;label className="text-[9px] font-black uppercase text-slate-400"&gt;Propina %&lt;/label&gt;&lt;input type="number" value={tip} onChange={e=&gt;setTip(Number(e.target.value))} className="w-full p-2.5 border rounded-xl outline-none focus:ring-2 focus:ring-indigo-500"/&gt;&lt;/div&gt;&lt;div className="flex-1"&gt;&lt;label className="text-[9px] font-black uppercase text-slate-400"&gt;Impuesto %&lt;/label&gt;&lt;input type="number" value={tax} onChange={e=&gt;setTax(Number(e.target.value))} className="w-full p-2.5 border rounded-xl outline-none focus:ring-2 focus:ring-indigo-500"/&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;button onClick={() =&gt; setStep('results')} className="w-full py-4 bg-green-600 text-white font-black rounded-2xl shadow-lg active:scale-95"&gt;Ver Resultados Finales&lt;/button&gt;&lt;/div&gt;}&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="space-y-4"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{items.map(item =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const as = assignments[item.id] || {};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const totalW = Object.values(as).reduce((a,b)=&gt;a+b, 0);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>return (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div key={item.id} className="bg-white rounded-2xl border shadow-sm overflow-hidden animate-in"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="p-3 bg-slate-50 border-b flex justify-between items-center"&gt;&lt;div className="font-bold text-slate-700"&gt;{item.name}&lt;/div&gt;&lt;div className="font-black text-indigo-600"&gt;${item.price.toFixed(2)}&lt;/div&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="p-3 space-y-2"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{people.map((p, idx) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const w = as[p.id] || 0;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const per = totalW &gt; 0 ? Math.round((w/totalW)*100) : 0;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const c = getColor(idx);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>return (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div key={p.id} className="flex items-center gap-2"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button onClick={() =&gt; { const curr = assignments[item.id] || {}; if (curr[p.id]) { delete curr[p.id]; setAssignments({...assignments, [item.id]: curr}); } else { setAssignments({...assignments, [item.id]: {...curr, [p.id]: 1}}); } }} className={`relative flex-1 text-left px-3 py-2 rounded-xl text-xs font-bold border transition-all overflow-hidden ${w&gt;0 ? `${c.b} ${c.t}` : 'bg-slate-50 text-slate-300 border-slate-100'}`}&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{w&gt;0 &amp;&amp; &lt;div className={`absolute left-0 top-0 bottom-0 ${c.f} opacity-15 transition-all duration-500`} style={{ width: `${per}%` }}/&gt;}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span className="relative z-10 flex items-center gap-1"&gt;&lt;span&gt;{p.avatar}&lt;/span&gt; {p.name}&lt;/span&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{w&gt;0 &amp;&amp; &lt;div className="flex items-center gap-1 shrink-0"&gt;&lt;span className={`text-[10px] font-black min-w-[30px] ${c.t}`}&gt;{per}%&lt;/span&gt;&lt;button onClick={()=&gt;setAssignments({...assignments, [item.id]: {...as, [p.id]: Math.max(0.5, w-0.5)}})} className="bg-slate-100 p-1 rounded-lg active:bg-slate-200"&gt;&lt;Minus size={12}/&gt;&lt;/button&gt;&lt;button onClick={()=&gt;setAssignments({...assignments, [item.id]: {...as, [p.id]: w+0.5}})} className="bg-slate-100 p-1 rounded-lg active:bg-slate-200"&gt;&lt;Plus size={12}/&gt;&lt;/button&gt;&lt;/div&gt;}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>})}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>})}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/UIWrapper&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>if (step === 'results') return (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;UIWrapper title="Resumen" onBack={() =&gt; setStep('splitting')}&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="bg-indigo-900 text-white p-6 rounded-3xl shadow-xl space-y-4 relative overflow-hidden group"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="absolute top-0 right-0 p-10 bg-indigo-500 opacity-5 rounded-full scale-150"&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex justify-between items-baseline relative z-10"&gt;&lt;span className="uppercase text-[10px] font-black text-indigo-300 tracking-widest"&gt;Total Factura&lt;/span&gt;&lt;span className="text-3xl font-black"&gt;${results.total.toFixed(2)}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="text-xs text-indigo-200 border-t border-indigo-700/50 pt-3 space-y-1 relative z-10"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex justify-between"&gt;&lt;span&gt;Base:&lt;/span&gt;&lt;span&gt;${results.subtotalNeto.toFixed(2)}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex justify-between"&gt;&lt;span&gt;Impuesto ({tax}%):&lt;/span&gt;&lt;span&gt;${results.tAm.toFixed(2)} {pricesIncludeTax &amp;&amp; "(Inc.)"}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex justify-between font-black text-white"&gt;&lt;span&gt;Propina ({tip}%):&lt;/span&gt;&lt;span&gt;${results.pAm.toFixed(2)}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button onClick={()=&gt;setShowFullBreakdown(true)} className="w-full py-2.5 bg-white/10 rounded-xl text-[10px] font-black uppercase tracking-widest border border-white/20 active:bg-white/20 relative z-10"&gt;AuditorÃ­a de Mesa&lt;/button&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="bg-white p-4 rounded-2xl border shadow-sm space-y-3"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;h3 className="text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-1"&gt;&lt;Gift size={12}/&gt; GestiÃ³n de Invitaciones&lt;/h3&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{people.map(p =&gt; (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div key={p.id} className="flex justify-between items-center text-xs border-b last:border-0 py-2"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;span className="font-bold text-slate-600"&gt;{p.avatar} {p.name} es pagado por:&lt;/span&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;select value={invitations[p.id] || 'self'} onChange={e =&gt; setInvitations({...invitations, [p.id]: e.target.value})} className="bg-slate-50 font-black text-indigo-600 rounded-lg px-2 py-1 outline-none border border-indigo-50"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;option value="self"&gt;SÃ­ mismo&lt;/option&gt;&lt;option value="everyone"&gt;Todos&lt;/option&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{people.filter(o=&gt;o.id!==p.id).map(o=&gt;&lt;option key={o.id} value={o.id}&gt;{o.name}&lt;/option&gt;)}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/select&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>))}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="space-y-2 pb-20"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{people.map((p, idx) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const d = results.pData[p.id]; const c = getColor(idx);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const isInvited = invitations[p.id] &amp;&amp; invitations[p.id] !== 'self';</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>return &lt;button key={p.id} onClick={()=&gt;setSelectedPersonDetail(p)} className={`w-full bg-white p-4 rounded-2xl flex justify-between items-center border transition-all active:scale-98 ${d.final &gt; 0 ? c.b : 'bg-pink-50 border-pink-100 opacity-80'}`}&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="text-left flex items-center gap-3"&gt;&lt;div className={`w-10 h-10 ${c.f} rounded-full flex items-center justify-center text-xl shadow-sm`}&gt;{p.avatar}&lt;/div&gt;&lt;div&gt;&lt;div className="font-black text-slate-800 text-sm leading-none"&gt;{p.name}&lt;/div&gt;{isInvited &amp;&amp; &lt;div className="text-[8px] font-black text-pink-600 uppercase mt-1 flex items-center gap-0.5"&gt;&lt;Gift size={8}/&gt; Invitado&lt;/div&gt;}&lt;/div&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex items-center gap-3"&gt;&lt;span className={`text-xl font-black ${d.final &gt; 0 ? c.t : 'text-slate-300 line-through'}`}&gt;${d.final.toFixed(2)}&lt;/span&gt;&lt;ChevronRight size={14} className="opacity-20"/&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/button&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>})}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{selectedPersonDetail &amp;&amp; (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="fixed inset-0 bg-slate-900/70 backdrop-blur-sm z-[100] flex items-end sm:items-center justify-center p-4 animate-in"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="bg-white w-full max-w-sm rounded-[2.5rem] shadow-2xl overflow-hidden"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="p-6 border-b flex justify-between items-center bg-slate-50"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex items-center gap-3"&gt;&lt;span className="text-3xl"&gt;{selectedPersonDetail.avatar}&lt;/span&gt;&lt;h3 className="font-black text-xl tracking-tight"&gt;Cuenta de {selectedPersonDetail.name}&lt;/h3&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button onClick={()=&gt;setSelectedPersonDetail(null)} className="p-2 bg-slate-200 rounded-full active:bg-slate-300"&gt;&lt;X size={18}/&gt;&lt;/button&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="p-6 space-y-5"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="max-h-64 overflow-y-auto space-y-3 pr-1 scrollbar-hide"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{results.pData[selectedPersonDetail.id].paidBy.length &gt; 0 &amp;&amp; &lt;div className="bg-pink-50 p-3 rounded-2xl border border-pink-100"&gt;{results.pData[selectedPersonDetail.id].paidBy.map((pb,idx)=&gt;&lt;div key={idx} className="text-[10px] font-black text-pink-700 flex justify-between uppercase tracking-wider"&gt;&lt;span&gt;Pagado por {pb.name}&lt;/span&gt;&lt;span&gt;${pb.amount.toFixed(2)}&lt;/span&gt;&lt;/div&gt;)}&lt;/div&gt;}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="text-[10px] font-black uppercase text-slate-400 tracking-widest"&gt;Consumo Detallado&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{results.pData[selectedPersonDetail.id].items.map((i, idx) =&gt; &lt;div key={idx} className="flex justify-between text-xs font-bold text-slate-700"&gt;&lt;span&gt;{i.name} ({(i.units).toFixed(1)} und.)&lt;/span&gt;&lt;span&gt;${i.share.toFixed(2)}&lt;/span&gt;&lt;/div&gt;)}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="pt-2 border-t mt-2 space-y-1"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex justify-between text-[10px] text-slate-500 font-black uppercase"&gt;&lt;span&gt;Propina proporcional:&lt;/span&gt;&lt;span&gt;${results.pData[selectedPersonDetail.id].tip.toFixed(2)}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex justify-between text-[10px] text-slate-500 font-black uppercase"&gt;&lt;span&gt;Impuesto proporcional:&lt;/span&gt;&lt;span&gt;{pricesIncludeTax ? &lt;span className="text-indigo-600"&gt;Incluido âœ“&lt;/span&gt; : `$${results.pData[selectedPersonDetail.id].tax.toFixed(2)}`}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{results.pData[selectedPersonDetail.id].inviting.map((inv, idx) =&gt; &lt;div key={idx} className="flex justify-between text-[10px] font-black text-indigo-600 uppercase border-t border-indigo-50 pt-1"&gt;&lt;span&gt;InvitaciÃ³n a {inv.name}&lt;/span&gt;&lt;span&gt;+${inv.amount.toFixed(2)}&lt;/span&gt;&lt;/div&gt;)}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="pt-4 border-t flex justify-between items-baseline"&gt;&lt;span className="text-[11px] font-black uppercase text-slate-400 tracking-widest"&gt;Total a Pagar&lt;/span&gt;&lt;span className="text-4xl font-black text-indigo-600 tracking-tighter"&gt;${results.pData[selectedPersonDetail.id].final.toFixed(2)}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;button onClick={() =&gt; {<span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const d = results.pData[selectedPersonDetail.id];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>let t = `*haFAnAs - ${selectedPersonDetail.name}*\n\n`;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if (d.paidBy.length &gt; 0) t += `ğŸ *Â¡Invitado!* por ${d.paidBy.map(p=&gt;p.name).join(', ')}\n\n`;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>t += `ğŸ´ *Consumo:*\n` + d.items.map(i=&gt;`- ${i.name}: ${i.units.toFixed(1)} und. -&gt; $${i.share.toFixed(2)}`).join('\n') + `\n\n`;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>t += `ğŸ“Š *Extras:*\n- Impuesto: ${pricesIncludeTax ? 'Inc.' : '$'+d.tax.toFixed(2)}\n- Propina: $${d.tip.toFixed(2)}\n`;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>if (d.inviting.length &gt; 0) t += `\nğŸŒŸ *Invitaciones:*\n` + d.inviting.map(i=&gt;`- Por ${i.name}: $${i.amount.toFixed(2)}`).join('\n') + `\n`;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>t += `\nğŸ’° *TOTAL: $${d.final.toFixed(2)}*`;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>copy(t);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}} className={`w-full py-4 rounded-2xl font-black flex items-center justify-center gap-2 transition-all ${copySuccess ? 'bg-green-600 text-white' : 'bg-indigo-600 text-white shadow-xl shadow-indigo-100'}`}&gt;{copySuccess ? &lt;Check size={18}/&gt; : &lt;Share2 size={18}/&gt;} {copySuccess ? 'Copiado' : 'Compartir Resumen'}&lt;/button&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>)}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{showFullBreakdown &amp;&amp; (</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="fixed inset-0 bg-slate-900/70 backdrop-blur-sm z-[100] flex items-end sm:items-center justify-center p-4 animate-in"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="bg-white w-full max-w-sm rounded-[2.5rem] shadow-2xl flex flex-col max-h-[85vh] overflow-hidden"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="p-6 border-b flex justify-between items-center bg-indigo-50 shrink-0"&gt;&lt;div className="flex items-center gap-3"&gt;&lt;div className="w-10 h-10 bg-indigo-600 text-white rounded-xl flex items-center justify-center"&gt;&lt;List size={22}/&gt;&lt;/div&gt;&lt;h3 className="text-xl font-black text-slate-800 tracking-tight"&gt;Cuentas de Mesa&lt;/h3&gt;&lt;/div&gt;&lt;button onClick={()=&gt;setShowFullBreakdown(false)} className="p-2 bg-white rounded-full border shadow-sm active:bg-slate-50"&gt;&lt;X size={18}/&gt;&lt;/button&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex-1 overflow-y-auto p-4 space-y-4"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>{items.map(item =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const as = assignments[item.id] || {};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const totalW = Object.values(as).reduce((a,b)=&gt;a+b, 0);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>return &lt;div key={item.id} className="bg-slate-50 p-4 rounded-2xl border border-slate-200/60 shadow-sm leading-tight"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex justify-between font-black text-sm mb-2 text-slate-800"&gt;&lt;span&gt;{item.name} ({item.quantity} und.)&lt;/span&gt;&lt;span className="text-indigo-600"&gt;${item.price.toFixed(2)}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="space-y-1"&gt;{Object.entries(as).map(([pId, w]) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const p = people.find(x=&gt;x.id===pId);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>return &lt;div key={pId} className="flex justify-between text-[10px] font-bold text-slate-500 tracking-tight"&gt;&lt;div className="flex items-center gap-1"&gt;&lt;span&gt;{p.avatar}&lt;/span&gt;&lt;span&gt;{p.name} ({(w/totalW*item.quantity).toFixed(1)} und.)&lt;/span&gt;&lt;/div&gt;&lt;span&gt;${(w/totalW*item.price).toFixed(2)}&lt;/span&gt;&lt;/div&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>})}&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>})}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="p-5 bg-indigo-600 text-white rounded-3xl space-y-1.5 shadow-lg"&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex justify-between text-[10px] font-black uppercase opacity-70"&gt;&lt;span&gt;Base Neta:&lt;/span&gt;&lt;span&gt;${results.sub.toFixed(2)}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex justify-between text-[10px] font-black uppercase opacity-70"&gt;&lt;span&gt;Impuesto Global:&lt;/span&gt;&lt;span&gt;${results.tAm.toFixed(2)}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex justify-between text-[10px] font-black uppercase opacity-70"&gt;&lt;span&gt;Propina Global:&lt;/span&gt;&lt;span&gt;${results.pAm.toFixed(2)}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="flex justify-between font-black text-xl pt-2 border-t border-white/10 tracking-tighter uppercase"&gt;&lt;span&gt;Total Cuenta&lt;/span&gt;&lt;span&gt;${results.total.toFixed(2)}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;div className="p-6 border-t shrink-0"&gt;&lt;button onClick={() =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>let t = `*haFAnAs - AuditorÃ­a de Mesa* ğŸ½ï¸\n\n`;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>items.forEach(i =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const as = assignments[i.id] || {};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const tw = Object.values(as).reduce((a,b)=&gt;a+b,0);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>t += `ğŸ“Œ *${i.name}* ($${i.price.toFixed(2)})\n` + Object.entries(as).map(([pid, w]) =&gt; {</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>const p = people.find(x=&gt;x.id===pid);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>return `<span class="Apple-converted-space">Â  </span>â€¢ ${p.name}: ${(w/tw*i.quantity).toFixed(1)} und. ($${(w/tw*i.price).toFixed(2)})`;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}).join('\n') + '\n\n';</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>t += `ğŸ“Š *Desglose Final:*\n- Subtotal: $${results.sub.toFixed(2)}\n- Impuestos: $${results.tAm.toFixed(2)}\n- Propina: $${results.pAm.toFixed(2)}\n\nğŸ’° *TOTAL MESA: $${results.total.toFixed(2)}*`;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>copy(t);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>}} className={`w-full py-4 rounded-2xl font-black flex items-center justify-center gap-2 active:scale-95 transition-all ${copySuccess ? 'bg-green-600 text-white' : 'bg-slate-800 text-white shadow-lg'}`}&gt;{copySuccess ? &lt;Check size={18}/&gt; : &lt;Share2 size={18}/&gt;} {copySuccess ? 'Copiado' : 'Compartir con el Grupo'}&lt;/button&gt;&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/div&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>)}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>&lt;/UIWrapper&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>return null;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>ReactDOM.createRoot(document.getElementById('root')).render(&lt;App /&gt;);</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
</body>
</html>
